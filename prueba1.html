<!DOCTYPE html>
<html>
<head>
<style>
.boton-deslizante {
  width: 300px; 
  height: 50px;  
  background-color: #4CAF50; 
  border-radius: 25px; 
  display: flex;
  align-items: center; 
  position: relative; 
  overflow: hidden; 
}

.circulo {
  width: 40px;
  height: 40px;
  background-color: #fff;
  border-radius: 50%;
  position: absolute;
  left: 5px; 
  cursor: grab; 
}

.texto {
  color: white;
  font-size: 16px;
  flex-grow: 1;
  text-align: center;
  transition: opacity 0.3s ease; /* Transición suave para la opacidad */
}

/* Clase para ocultar el texto */
.texto-oculto {
  opacity: 0; 
}
</style>
</head>
<body>

<div class="boton-deslizante">
  <div class="circulo"></div>
  <span class="texto">Publicar Propiedad</span>
</div>

<script>
const circulo = document.querySelector('.circulo');
const boton = document.querySelector('.boton-deslizante');
const texto = document.querySelector('.texto');

let isDragging = false;
let offsetX;

function iniciarArrastre(e) {
  isDragging = true;
  // Obtener la posición inicial correcta para mouse o touch events
  offsetX = circulo.offsetLeft - (e.clientX || e.touches[0].clientX); 
}

function moverCirculo(e) {
  if (!isDragging) return;
  e.preventDefault(); 

  // Calcular la posición del círculo para mouse o touch events
  const newLeft = (e.clientX || e.touches[0].clientX) + offsetX; 
  circulo.style.left = Math.max(0, Math.min(newLeft, boton.offsetWidth - circulo.offsetWidth)) + 'px';

  // Ocultar el texto si el círculo está encima
  if (newLeft > boton.offsetWidth / 2) { 
    texto.classList.add('texto-oculto');
  } else {
    texto.classList.remove('texto-oculto');
  }
}

function finalizarArrastre(e) {
  isDragging = false;

  if (parseInt(circulo.style.left) >= boton.offsetWidth - circulo.offsetWidth) {
    alert('¡Propiedad publicada!'); 
    circulo.style.left = '5px'; 
    texto.classList.remove('texto-oculto'); // Mostrar el texto de nuevo
  } else {
    circulo.style.left = '5px'; 
    texto.classList.remove('texto-oculto'); // Mostrar el texto de nuevo
  }
}

// Eventos para mouse
circulo.addEventListener('mousedown', iniciarArrastre);
document.addEventListener('mousemove', moverCirculo);
document.addEventListener('mouseup', finalizarArrastre);

// Eventos para touch
circulo.addEventListener('touchstart', iniciarArrastre);
document.addEventListener('touchmove', moverCirculo);
document.addEventListener('touchend', finalizarArrastre);
</script>

</body>
</html>
